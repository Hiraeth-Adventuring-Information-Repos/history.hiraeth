<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hiraeth Timeline: A Celestial Descent</title>
    <!-- TailwindCSS for layout and utilities -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font: EB Garamond (Greco-Roman serif feel) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">

    <style>
        /* --- Custom Styles --- */
        body {
            /* EB Garamond is our primary font */
            font-family: 'EB Garamond', serif;
            /* A dark, cosmic background for the page */
            background-color: #0c0a1a;
            color: #f0f0f0;
            overflow-x: hidden;
        }

        h1, h2, h3, h4 {
            /* Heavier font weight for titles */
            font-weight: 700;
            letter-spacing: 0.025em;
        }

        /* --- Timeline Layer Styling --- */
        .timeline-layer {
            /* Each layer is at least one screen high */
            min-height: 100vh;
            padding: 6rem 2.5rem; /* 6rem top/bottom, 2.5rem left/right */
            position: relative;
            overflow: hidden;
            border-bottom: 2px solid;
            
            /* --- PARALLAX EFFECT --- */
            /* This creates the simple parallax "descent" */
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        /* --- Layer 6: Modern Era (Acropolis) --- */
        #modern-era {
            /* Bright marble/stucco background */
            background-image: linear-gradient(to bottom, #ffffff, #e8e8e8);
            color: #333;
            border-bottom-color: #d1d1d1;
        }
        
        /* Greek Key border effect */
        #modern-era::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 20px;
            /* Repeating Greek Key pattern */
            background-image: linear-gradient(135deg, #bbb 25%, transparent 25%), linear-gradient(225deg, #bbb 25%, transparent 25%), linear-gradient(45deg, #bbb 25%, transparent 25%), linear-gradient(315deg, #bbb 25%, transparent 25%);
            background-position: -5px -5px, -5px -5px, 0 0, 0 0;
            background-size: 10px 10px;
            background-repeat: repeat-x;
            /* Use a solid bg for the greek key to work on a gradient */
            background-color: #e8e8e8;
        }

        /* --- Layer 5: Unification Age (Republic) --- */
        #unification-age {
            background-image: linear-gradient(to bottom, #4a4a6a, #3a3a5a);
            color: #e0e0e0;
            border-bottom-color: #6a6a8a;
        }

        /* --- Layer 4: Mythic Age (Dusk) --- */
        #mythic-age {
            background-image: linear-gradient(to bottom, #3a3a5a, #2a2a4a);
            color: #d0d0d0;
            border-bottom-color: #4a4a6a;
        }

        /* --- Layer 3: Classical Age (Night) --- */
        #classical-age {
            background-image: linear-gradient(to bottom, #2a2a4a, #1a1a3a);
            color: #c0c0c0;
            border-bottom-color: #3a3a5a;
        }

        /* --- Layer 2: Ancient Era (Star-Chart) --- */
        #ancient-era {
            /* Deep space */
            background-image: radial-gradient(ellipse at 20% 80%, #1a1a3a 0%, rgba(26,26,58,0) 50%),
                                radial-gradient(ellipse at 80% 30%, #3a2a4a 0%, rgba(58,42,74,0) 40%),
                                #0c0a1a;
            color: #f0f0f0;
            border-bottom-color: #1a1a3a;
        }

        /* --- Layer 1: Antediluvian (Primordial Chaos) --- */
        #antediluvian-age {
            /* Swirling dark nebula effect */
            background-image: radial-gradient(ellipse at 70% 30%, #4a00e0 0%, rgba(74,0,224,0) 60%),
                                radial-gradient(ellipse at 30% 70%, #002266 0%, rgba(0,34,102,0) 50%),
                                #0c0a1a;
            border-bottom-color: #4a00e0;
        }

        /* --- Event Card Styling --- */
        .event-trigger {
            /* This is the new common class for all clickable items */
            cursor: pointer;
            transition: all 0.3s ease-in-out;
        }

        .event-card {
            border-radius: 12px;
            padding: 1.5rem;
            border-width: 1px;
        }

        /* Modern "Marble Plaque" Card */
        .event-card.modern {
            background: #ffffff;
            border-color: #d1d1d1;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        .event-card.modern:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        .event-card.modern .event-date { color: #555; font-weight: 700; }
        .event-card.modern .event-title { color: #222; }

        /* Unification "Marble Slab" Card */
        .event-card.unification {
            background: rgba(255, 255, 255, 0.1);
            border-color: #aaa;
            backdrop-filter: blur(3px);
        }
        .event-card.unification:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        .event-card.unification .event-date { color: #ccc; }
        .event-card.unification .event-title { color: #fff; }

        /* Mythic "Broken Mosaic" Card */
        .event-card.mythic {
            background: rgba(255, 255, 255, 0.05);
            border-color: #8a63f5;
            opacity: 0.8;
            border-radius: 4px 20px 8px 15px; /* Irregular shape */
        }
        .event-card.mythic:hover {
            opacity: 1;
            transform: scale(1.03);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 20px rgba(138, 99, 245, 0.2);
        }
        .event-card.mythic .event-date { color: #c0b0f0; }
        .event-card.mythic .event-title { color: #e0d8ff; }

        /* Classical "Mosaic Tile" Card */
        .event-card.classical {
            background: rgba(200, 200, 220, 0.1);
            border-color: #999;
            border-width: 2px;
            border-radius: 2px; /* Sharp edges */
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .event-card.classical:hover {
            transform: scale(1.02);
            background: rgba(200, 200, 220, 0.2);
            border-color: #fff;
        }
        .event-card.classical .event-date { color: #bbb; }
        .event-card.classical .event-title { color: #e0e0e0; }

        /* Ancient "Runic Fragment" Card (Layer 1) */
        .event-card.ancient {
            background: rgba(26, 26, 46, 0.7); /* Translucent */
            border-color: #4a00e0;
            box-shadow: 0 4px 12px rgba(74, 0, 224, 0.2);
            backdrop-filter: blur(5px);
        }
        .event-card.ancient:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(74, 0, 224, 0.4);
            border-color: #8a63f5;
        }
        .event-card.ancient .event-date { color: #aaa; font-style: italic; }
        .event-card.ancient .event-title { color: #f0f0f0; }
        
        /* --- Layer 2: Star-Chart Styling --- */
        .star-chart-container {
            position: relative;
            width: 100%;
            height: 100vh; /* Full screen height for positioning */
            max-height: 1000px;
        }

        .star {
            position: absolute;
            border-radius: 50%;
            background: #ffffff;
            /* Brighter shadow for filler stars */
            box-shadow: 0 0 15px #fff, 0 0 30px #fff;
            animation: twinkle 4s infinite alternate;
        }
        .star.clickable {
            /* Clickable stars are bigger and glow more */
            width: 12px;
            height: 12px;
            /* Brighter shadow for clickable stars, added a third glow */
            box-shadow: 0 0 20px #fff, 0 0 40px #8a63f5, 0 0 10px #f0f;
        }
        .star.clickable:hover {
            animation-play-state: paused;
            transform: scale(2.5);
            /* Brighter shadow on hover */
            box-shadow: 0 0 30px #f0f, 0 0 50px #8a63f5, 0 0 10px #fff;
        }
        .star-label {
            position: absolute;
            color: #aaa;
            font-size: 0.875rem; /* 14px */
            /* New centering styles */
            top: 100%; /* Position top of label at bottom of star */
            left: 50%;  /* Position left of label at center of star */
            transform: translateX(-50%) translateY(5px); /* Center horizontally, add 5px padding */
            white-space: nowrap;
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        .star.clickable:hover .star-label {
            opacity: 1;
            color: #fff;
            /*
             * Counter-scale the font-size on hover.
             * The parent div scales by 2.5x. We want a final font size of ~1.25rem (20px).
             * 20px / 2.5 = 8px, which is 0.5rem.
            */
            font-size: 0.5rem;
            /*
             * Adjust Y-translate padding. We want ~10px of padding.
             * 10px / 2.5 = 4px.
            */
            transform: translateX(-50%) translateY(4px);
        }

        /* Twinkle Animation */
        @keyframes twinkle {
            0% { opacity: 0.4; }
            100% { opacity: 1; }
        }

        /* --- Modal Styling --- */
        #modal-backdrop { transition: opacity 0.3s ease; }
        #modal-container { transition: all 0.3s ease; }

        /* Base style for all modal content */
        .modal-content-base {
            width: 100%;
            max-width: 3xl; /* 768px */
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            padding: 2.5rem;
            position: relative;
        }
        
        /* Theme 1: Scroll (Modern) */
        .modal-theme-scroll {
            background: #fdf5e6; /* Parchment color */
            color: #5d4037; /* Brown text */
            border: 8px solid #8d6e63;
            border-image: linear-gradient(to bottom, #8d6e63, #bcaaa4) 1 100%;
        }
        .modal-theme-scroll .modal-date { color: #795548; }
        .modal-theme-scroll .rumor-box { border-top: 2px dashed #bcaaa4; background: #faf3e0; }
        .modal-theme-scroll #modal-close-btn { color: #795548; }
        .modal-theme-scroll #modal-close-btn:hover { color: #3e2723; }

        /* Theme 2: Stone Tablet (Ancient) */
        .modal-theme-tablet {
            background: #4a4a4a; /* Dark stone */
            color: #f0f0f0;
            border: 2px solid #222;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.5);
        }
        .modal-theme-tablet .modal-date { color: #ccc; font-style: italic; }
        .modal-theme-tablet .rumor-box { border-top: 2px dashed #777; background: #3a3a3a; }
        .modal-theme-tablet #modal-close-btn { color: #ccc; }
        .modal-theme-tablet #modal-close-btn:hover { color: #fff; }

        /* Theme 3: Marble (Unification) */
        .modal-theme-marble {
            background: #e5e5e5;
            color: #333;
            border: 4px solid #aaa;
            box-shadow: 0 0 20px rgba(255,255,255,0.3);
        }
        .modal-theme-marble .modal-date { color: #555; }
        .modal-theme-marble .rumor-box { border-top: 2px dashed #999; background: #d5d5d5; }
        .modal-theme-marble #modal-close-btn { color: #777; }
        .modal-theme-marble #modal-close-btn:hover { color: #000; }
        
        /* Theme 4: Mosaic (Classical/Mythic) */
        .modal-theme-mosaic {
            background: #c5b8a5; /* Terracotta */
            color: #4a3c32;
            border: 6px solid #795548; /* Grout/edge */
        }
        .modal-theme-mosaic .modal-date { color: #6d4c41; }
        .modal-theme-mosaic .rumor-box { border-top: 2px dashed #a1887f; background: #b5a895; }
        .modal-theme-mosaic #modal-close-btn { color: #5d4037; }
        .modal-theme-mosaic #modal-close-btn:hover { color: #3e2723; }

        /* Modal Close Button */
        #modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2.5rem;
            line-height: 1;
            font-weight: 300;
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.2s;
        }

        /* Rumor Box */
        .rumor-box {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 8px;
        }
        .rumor-box h4 {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-style: normal;
        }
        .rumor-box p {
            font-style: italic;
            opacity: 0.9;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Main Content Area -->
    <main>
        <!-- Page Header -->
        <header class="text-center py-20 px-4" style="background: radial-gradient(ellipse at 50% 100%, #1a1a2e 0%, #0c0a1a 80%);">
            <h1 class="text-6xl md:text-7xl font-bold text-white mb-4">The Hiraeth Timeline</h1>
            <p class="text-2xl text-gray-300 italic">A Celestial Descent Through the Ages</p>
        </header>

        <!-- 
        ========================================
        LAYER 6: THE MODERN ERA
        THEME: Bright Acropolis / Marble
        ========================================
        -->
        <section id="modern-era" class="timeline-layer">
            <div class="container mx-auto max-w-7xl">
                <h2 class="text-5xl font-bold mb-4 text-center">The Modern Era</h2>
                <p class="text-xl text-center text-gray-600 mb-12 italic">"History as written by the victors. Clear, precise, and absolute."</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- Event Card -->
                    <div class="event-trigger event-card modern" data-event-id="1" data-theme="scroll">
                        <p class="event-date text-sm mb-2">75 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Pirates!</h3>
                        <p class="text-gray-700">A sudden surge in piracy disrupts trade routes along the coast.</p>
                    </div>
                    
                    <!-- Event Card -->
                    <div class="event-trigger event-card modern" data-event-id="2" data-theme="scroll">
                        <p class="event-date text-sm mb-2">75 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Wyss Ascends</h3>
                        <p class="text-gray-700">Wyss defeats the Cave Mother, claiming leadership over the first layer of Hell.</p>
                    </div>

                    <!-- Event Card -->
                    <div class="event-trigger event-card modern" data-event-id="3" data-theme="scroll">
                        <p class="event-date text-sm mb-2">73 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Shadowfell Attack on Delphi</h3>
                        <p class="text-gray-700">The Witches' Council of Delphi repels a major incursion from the Shadowfell.</p>
                    </div>

                    <!-- Event Card -->
                    <div class="event-trigger event-card modern" data-event-id="4" data-theme="scroll">
                        <p class="event-date text-sm mb-2">71 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">The Endless Winter's End</h3>
                        <p class="text-gray-700">A group known as the "Frozen Rose" defeats the goddess Morena, ending a two-year-long winter.</p>
                    </div>

                    <!-- Event Card -->
                    <div class="event-trigger event-card modern" data-event-id="5" data-theme="scroll">
                        <p class="event-date text-sm mb-2">50 BEC</C>
                        <h3 class="event-title text-2xl font-bold mb-3">Founding of the Atheneum</h3>
                        <p class="text-gray-700">The Wizard's Council formally establishes the Atheneum on lands from the Last Elven State.</p>
                    </div>

                    <!-- Event Card -->
                    <div class="event-trigger event-card modern" data-event-id="6" data-theme="scroll">
                        <p class="event-date text-sm mb-2">-25 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">The Stars Fall</h3>
                        <p class="text-gray-700">As prophesied, the stars fall from the sky, a cataclysm that marks the true beginning of the new era.</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- 
        ========================================
        LAYER 5: THE UNIFICATION AGE
        THEME: Marble Republic / Dusk
        ========================================
        -->
        <section id="unification-age" class="timeline-layer">
            <div class="container mx-auto max-w-7xl">
                <h2 class="text-5xl font-bold mb-4 text-center">The Unification Age</h2>
                <p class="text-xl text-center text-gray-300 mb-12 italic">"The age of treaties and mortals. When civilization began to write its own laws."</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <div class="event-trigger event-card unification" data-event-id="508" data-theme="marble">
                        <p class="event-date text-sm mb-2">-30 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Aurora Dwarf Civil War</h3>
                        <p>A brutal civil war erupts among the Aurora Dwarves, the causes of which are still debated.</p>
                    </div>

                    <div class="event-trigger event-card unification" data-event-id="507" data-theme="marble">
                        <p class="event-date text-sm mb-2">c. -200 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Planar Barrier Established</h3>
                        <p>A planar barrier is created to keep the gods out of the mortal plane.</p>
                    </div>
                    
                    <div class="event-trigger event-card unification" data-event-id="506" data-theme="marble">
                        <p class="event-date text-sm mb-2">c. -200 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">The War of the Gods</h3>
                        <p>A cataclysmic conflict between divine beings reshapes the world, leading to their banishment.</p>
                    </div>
                    
                    <div class="event-trigger event-card unification" data-event-id="505" data-theme="marble">
                        <p class="event-date text-sm mb-2">-200 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Treaty of the Nations</h3>
                        <p>Major races sign a treaty formalizing the Argentum Compact, securing an era of peace.</p>
                    </div>
                    
                    <div class="event-trigger event-card unification" data-event-id="504" data-theme="marble">
                        <p class="event-date text-sm mb-2">c. -500 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">The First Paladins</h3>
                        <p>Holy warriors emerge to protect the realms and enforce the divine law of the gods.</p>
                    </div>

                    <div class="event-trigger event-card unification" data-event-id="503" data-theme="marble">
                        <p class="event-date text-sm mb-2">c. -500 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Conquest of the Southern Reaches</h3>
                        <p>Human kingdoms expand northwest, reclaiming lands to form Arfordir, Haroldford, and Roswin.</p>
                    </div>

                    <div class="event-trigger event-card unification" data-event-id="502" data-theme="marble">
                        <p class="event-date text-sm mb-2">-750 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">The Wizard Conclave</h3>
                        <p>Wizards gather to create rules for the responsible use of magic, fearing another catastrophe.</p>
                    </div>

                    <div class="event-trigger event-card unification" data-event-id="501" data-theme="marble">
                        <p class="event-date text-sm mb-2">-1,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Formation of the Argentum Compact</h3>
                        <p>A coalition of kingdoms forms to establish peace and mutual defense.</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- 
        ========================================
        LAYER 4: THE MYTHIC AGE
        THEME: Broken Mosaics / Dusk
        ========================================
        -->
        <section id="mythic-age" class="timeline-layer">
            <div class="container mx-auto max-w-7xl">
                <h2 class="text-5xl font-bold mb-4 text-center">The Mythic Age</h2>
                <p class="text-xl text-center text-gray-300 mb-12 italic">"The age of legends, prophecy, and magical cataclysms."</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <div class="event-trigger event-card mythic" data-event-id="404" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">-1,200 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Shattering of the Crystal Spire</h3>
                        <p>A magical catastrophe leads to the collapse of a significant elven structure, causing elven distrust.</p>
                    </div>

                    <div class="event-trigger event-card mythic" data-event-id="403" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">-1,500 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Fourth Witches' Council</h3>
                        <p>The fourth Witches' Council of Delphi is formed in response to growing magical threats.</p>
                    </div>

                    <div class="event-trigger event-card mythic" data-event-id="402" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">-1,500 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">The Starfall Prophecy</h3>
                        <p>Celestial beings foretell a war that will cause the stars themselves to fall upon the world.</p>
                    </div>

                    <div class="event-trigger event-card mythic" data-event-id="401" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">-2,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Codification of Divine Law</h3>
                        <p>The gods organize their followers, establishing the first formal temples and divine orders.</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- 
        ========================================
        LAYER 3: THE CLASSICAL AGE
        THEME: Mosaics / Night
        ========================================
        -->
        <section id="classical-age" class="timeline-layer">
            <div class="container mx-auto max-w-7xl">
                <h2 class="text-5xl font-bold mb-4 text-center">The Classical Age</h2>
                <p class="text-xl text-center text-gray-300 mb-12 italic">"The age of emerging empires, written magic, and wars in the dark."</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <div class="event-trigger event-card classical" data-event-id="307" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">c. -3,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Astrousian Campaigns</h3>
                        <p>Expeditions to reclaim Astrousia from dragon overlords meet mixed success; dragons rebrand as "God Kings".</p>
                    </div>

                    <div class="event-trigger event-card classical" data-event-id="306" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">c. -3,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Rise of the Atheneum</h3>
                        <p>The Atheneum forms within the First Elven State to fend off the Becarras barbarians.</p>
                    </div>
                    
                    <div class="event-trigger event-card classical" data-event-id="305" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">c. -3,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Arcane Renaissance</h3>
                        <p>A surge in arcane research leads to the creation of the first magical schools and academies.</p>
                    </div>

                    <div class="event-trigger event-card classical" data-event-id="304" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">c. -4,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Founding of the First Kingdoms</h3>
                        <p>The first true human civilizations emerge from scattered tribes and establish stable governance.</p>
                    </div>

                    <div class="event-trigger event-card classical" data-event-id="303" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">c. -4,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">Invention of Written Magic</h3>
                        <p>Wizards begin codifying spells, leading to the first spellbooks. Older rune magic fades.</p>
                    </div>

                    <div class="event-trigger event-card classical" data-event-id="302" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">c. -5,000 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">The Underlight War</h3>
                        <p>Dwarves descend into the Underdark to fight rising evil forces, securing their kingdom.</p>
                    </div>

                    <div class="event-trigger event-card classical" data-event-id="301" data-theme="mosaic">
                        <p class="event-date text-sm mb-2">-5,500 BEC</p>
                        <h3 class="event-title text-2xl font-bold mb-3">End of the Dragon Bounty</h3>
                        <p>The gods end their bounty, believing (incorrectly) that all vile dragons have been eradicated.</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- 
        ========================================
        LAYER 2: THE ANCIENT ERA
        THEME: Star-Chart / Deep Space
        ========================================
        -->
        <section id="ancient-era" class="timeline-layer">
            <div class="container mx-auto max-w-7xl">
                <h2 class="text-5xl font-bold mb-4 text-center">The Ancient Era</h2>
                <p class="text-xl text-center text-gray-300 mb-12 italic">"The age of myths. History told by the stars, not by mortals."</p>
                
                <div class="star-chart-container">
                    <!-- Events positioned absolutely as 'stars' -->
                    <div class="event-trigger star clickable" data-event-id="201" data-theme="tablet" style="top: 15%; left: 20%;">
                        <span class="star-label">Jailing of Minos</span>
                    </div>
                    
                    <div class="event-trigger star clickable" data-event-id="202" data-theme="tablet" style="top: 25%; left: 50%;">
                        <span class="star-label">Dragons Rule as Gods</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="203" data-theme="tablet" style="top: 30%; left: 80%;">
                        <span class="star-label">Creation of Humanoids</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="204" data-theme="tablet" style="top: 45%; left: 10%;">
                        <span class="star-label">Death of Arcana</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="205" data-theme="tablet" style="top: 50%; left: 30%;">
                        <span class="star-label">First Witches' Council</span>
                    </div>
                    
                    <div class="event-trigger star clickable" data-event-id="206" data-theme="tablet" style="top: 60%; left: 60%;">
                        <span class="star-label">Winrich's Empire</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="207" data-theme="tablet" style="top: 75%; left: 40%;">
                        <span class="star-label">Lyarna-Khesyara's Journey</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="208" data-theme="tablet" style="top: 80%; left: 75%;">
                        <span class="star-label">Tharnak the Great Dwarf</span>
                    </div>

                    <!-- Background "filler" stars -->
                    <div class="star" style="top: 10%; left: 10%; width: 2px; height: 2px; animation-delay: -1s;"></div>
                    <div class="star" style="top: 20%; left: 90%; width: 4px; height: 4px; animation-delay: -3s;"></div>
                    <div class="star" style="top: 40%; left: 70%; width: 3px; height: 3px; animation-delay: -2s;"></div>
                    <div class="star" style="top: 65%; left: 5%; width: 2px; height: 2px; animation-delay: -4s;"></div>
                    <div class="star" style="top: 90%; left: 50%; width: 5px; height: 5px; animation-delay: -0.5s;"></div>
                </div>
            </div>
        </section>

        <!-- 
        ========================================
        LAYER 1: THE ANTEDILUVIAN AGE
        THEME: Primordial Chaos / Cosmic Nebula (NOW A STAR-CHART)
        ========================================
        -->
        <section id="antediluvian-age" class="timeline-layer">
            <div class="container mx-auto max-w-7xl">
                <h2 class="text-5xl font-bold mb-4 text-center">The Antediluvian Age</h2>
                <p class="text-xl text-center text-gray-300 mb-12 italic">"Myths whispered from the dawn of time. More feeling than fact."</p>

                <div class="star-chart-container">
                    <!-- Events positioned absolutely as 'stars' -->
                    <div class="event-trigger star clickable" data-event-id="107" data-theme="tablet" style="top: 15%; left: 50%;">
                        <span class="star-label">The Great Flood</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="106" data-theme="tablet" style="top: 25%; left: 20%;">
                        <span class="star-label">The Giants' Departure</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="105" data-theme="tablet" style="top: 35%; left: 80%;">
                        <span class="star-label">Creation of Dwarves</span>
                    </div>
                    
                    <div class="event-trigger star clickable" data-event-id="104" data-theme="tablet" style="top: 50%; left: 35%;">
                        <span classs="star-label">Giants and Magic</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="103" data-theme="tablet" style="top: 65%; left: 65%;">
                        <span class="star-label">Creation of Dragons</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="102" data-theme="tablet" style="top: 80%; left: 15%;">
                        <span class="star-label">Introduction of Free Will</span>
                    </div>

                    <div class="event-trigger star clickable" data-event-id="101" data-theme="tablet" style="top: 90%; left: 50%;">
                        <span class="star-label">Creation of the Universe</span>
                    </div>

                    <!-- Background "filler" stars -->
                    <div class="star" style="top: 10%; left: 30%; width: 2px; height: 2px; animation-delay: -1.5s;"></div>
                    <div class="star" style="top: 30%; left: 90%; width: 3px; height: 3px; animation-delay: -2.5s;"></div>
                    <div class="star" style="top: 55%; left: 10%; width: 2px; height: 2px; animation-delay: -3.5s;"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- 
    ========================================
    MODAL (POP-UP) SYSTEM
    ========================================
    -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black bg-opacity-70 z-40 hidden opacity-0"></div>

    <div id="modal-container" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden opacity-0 scale-95">
        <div id="modal-content" class="modal-content-base">
            
            <button id="modal-close-btn">&times;</button>
            
            <h3 id="modal-title" class="text-4xl font-bold mb-2">Event Title Goes Here</h3>
            <p id="modal-date" class="text-lg mb-6">Event Date</p>
            <p id="modal-description" class="text-lg leading-relaxed">Full event description goes here.</p>

            <div class="rumor-box">
                <h4>Rumor</h4>
                <p id="modal-rumor">A random rumor will appear here.</p>
            </div>
        </div>
    </div>


    <script>
        // --- TIMELINE DATABASE ---
        const timelineData = {
            // Modern Era (Scrolls)
            1: {
                title: "Pirates!", date: "75 BEC",
                description: "A sudden and dramatic surge in piracy disrupts major trade routes, threatening the stability of coastal nations and the Gilded Nations' wealth.",
                rumors: [
                    "They say the pirates aren't random at all... they're funded by a disgruntled noble from Arfordir.",
                    "I heard the 'pirates' are actually just illusions created by a sea witch who's angry at the trade guilds.",
                    "It's not pirates, it's a sea monster! Waking up after that two-year winter."
                ]
            },
            2: {
                title: "Wyss Ascends", date: "75 BEC",
                description: "The enigmatic figure known as Wyss successfully defeated the Cave Mother, a powerful chthonic entity. Wyss has now claimed leadership and control over the first layer of Hell.",
                rumors: [
                    "Wyss didn't *kill* the Cave Mother. They *merged* with it. That's why they're so powerful now.",
                    "The gods are silent because Wyss is doing their dirty work, cleaning up the Hells after Malchor vanished.",
                    "I heard Wyss is just a puppet for a greater, unknown power from the Far Realm."
                ]
            },
            3: {
                title: "Shadowfell Attack on Delphi", date: "73 BEC",
                description: "A coordinated, large-scale attack on Delphi was launched by forces from the Shadowfell. The Witches' Council managed to repel the incursion, but the city was damaged and the veil between planes was weakened.",
                rumors: [
                    "The attack was a distraction. While the witches fought the shades, a single assassin stole something from the archives.",
                    "It wasn't the Shadowfell. It was a test by the *Atheneum* to see how strong the witches really are.",
                    "One of the witches *inside* Delphi opened the portal. They're hunting for a traitor now."
                ]
            },
            4: {
                title: "The Endless Winter's End", date: "71 BEC",
                description: "After two years of magical winter, a group of adventurers calling themselves the 'Frozen Rose' located and defeated the rogue goddess Morena. The snows have finally begun to thaw.",
                rumors: [
                    "They didn't 'defeat' Morena. They just reminded her of a lost love, and she let the world go.",
                    "The 'Frozen Rose' are frauds. The winter ended on its own schedule. They just took the credit.",
                    "The goddess Morena isn't defeated, she's just *trapped* inside a glacier. The one Winrich was in. What if she breaks out... with him?"
                ]
            },
            5: {
                title: "Founding of the Atheneum", date: "50 BEC",
                description: "Seeking to centralize and regulate magical study, the Wizard's Council re-formed as the Atheneum. They were granted lands from the former Last Elven State to build their academies.",
                rumors: [
                    "The Atheneum is just a way for the elves to control human magic. All the real power is still held by elven archmages.",
                    "They built the Atheneum on the ruins of the Crystal Spire. The place is haunted, and magic there is... strange.",
                    "The first act of the Atheneum was to lock away the knowledge of rune magic. They're afraid of the old ways."
                ]
            },
            6: {
                title: "The Stars Fall", date: "-25 BEC",
                description: "The Starfall Prophecy was fulfilled. In a cataclysmic event, the stars fell from the sky, impacting the world and reshaping coastlines, politics, and magic itself. This is the true start of the Modern Era.",
                rumors: [
                    "They weren't stars. They were the *ships* of the Giants, returning from space. And they crashed.",
                    "Each fallen star is a divine spark. Anyone who finds one can become a god. Or a monster.",
                    "The gods didn't *cause* the stars to fall. The planar barrier *failed*, and this was the result. They're just as scared as we are."
                ]
            },

            // Unification Age (Marble)
            501: {
                title: "Formation of the Argentum Compact", date: "-1,000 BEC",
                description: "A grand coalition of human and elven kingdoms forms to establish peace and mutual defense, hoping to end the wars of the Mythic Age.",
                rumors: [
                    "The Compact was a dwarven idea, but the elves took credit for it.",
                    "The original compact included a pact with a 'good' dragon, but that part was struck from the records.",
                    "It's a trading guild masquerading as a political alliance. It's all about money."
                ]
            },
            502: {
                title: "The Wizard Conclave", date: "-750 BEC",
                description: "Fearing another catastrophe like the Shattering of the Crystal Spire, wizards gather to create rules for the responsible use of magic. This body later becomes the Atheneum.",
                rumors: [
                    "They didn't just 'create rules.' They banned whole schools of magic, like blood magic and true chronomancy.",
                    "The Conclave was formed because one wizard *almost* became a god. They all ganged up to stop him.",
                    "The Conclave's first rule is that you don't talk about the Conclave. The *Atheneum* is just their public-facing branch."
                ]
            },
            503: {
                title: "Conquest of the Southern Reaches", date: "c. -500 BEC",
                description: "Human kingdoms in the west expand northwest, reclaiming lands from beasts and monsters to form the kingdoms of Arfordir, Haroldford, and Roswin.",
                rumors: [
                    "They didn't 'reclaim' lands. They *stole* them from the hobbit and firbolg clans who lived there.",
                    "The 'beasts and monsters' were just illusions created by a coven of hags to keep people out.",
                    "Arfordir was founded on a massive gold deposit, which is the only reason it's still relevant."
                ]
            },
            504: {
                title: "The First Paladins", date: "c. -500 BEC",
                description: "Following the Codification of Divine Law, the first holy warriors bound by oath emerge to protect the realms and enforce the will of the gods.",
                rumors: [
                    "The first 'paladin' was just a warrior who made a deal with an angel. The 'oath' part came later to make it sound noble.",
                    "Paladins are just puppets. The gods can revoke their power at any time. Don't trust them.",
                    "There are dark paladins, too. They just don't advertise."
                ]
            },
            505: {
                title: "Treaty of the Nations", date: "-200 BEC",
                description: "The major races sign a treaty formalizing the Argentum Compact, securing a brief era of peace. The small nations that would later form Bec are notably excluded.",
                rumors: [
                    "The Beccin nations were excluded on purpose. The Elves saw their ambition and wanted to keep them weak.",
                    "The treaty was signed with dragon's blood, which is why it's held for so long... mostly.",
                    "A clause in the treaty, written in tiny print, gives the elves dominion over all magical forests."
                ]
            },
            506: {
                title: "The War of the Gods", date: "c. -200 BEC",
                description: "A cataclysmic conflict between the divine beings, fought through their mortal proxies, reshapes the world and kills millions. This war is what led to their banishment.",
                rumors: [
                    "It wasn't a 'war.' It was a 'culling.' The gods tried to wipe out mortals for their hubris.",
                    "The war started because one god stole another god's wife. It was all just a petty squabble that got out of hand.",
                    "Mortals *won* the war. We're the ones who *created* the Planar Barrier to kick the gods out."
                ]
            },
            507: {
                title: "Planar Barrier Established", date: "c. -200 BEC",
                description: "Following the War of the Gods, a powerful planar barrier is created to keep the gods (and other powerful entities) from directly interfering with the mortal plane.",
                rumors: [
                    "The barrier is failing. That's what the 'Shadowfell Attack' was. A test.",
                    "The barrier doesn't keep gods *out*. It keeps something *in*.",
                    "Malchor, king of Hell, vanished right before the barrier went up. Coincidence? I think not."
                ]
            },
            508: {
                title: "Aurora Dwarf Civil War", date: "-30 BEC",
                description: "A brutal civil war erupts among the Aurora Dwarves, the causes of which are still debated. Some say it was over gold, others say it was a dispute over magic.",
                rumors: [
                    "It wasn't a civil war. They were fighting a creature from the Underdark that had possessed their king.",
                    "They found a new metal, 'Aurorium,' that drives people mad. That's what started the war.",
                    "The war ended when one side detonated a magical bomb that turned the other side to stone. They're still down there."
                ]
            },

            // Mythic Age (Mosaic)
            401: {
                title: "Codification of Divine Law", date: "-2,000 BEC",
                description: "The gods, seeing mortals organize, decide to do the same. They establish the first temples, divine orders, and lay down the laws of their priesthoods.",
                rumors: [
                    "The 'laws' were just the gods arguing over which of them got which portfolio.",
                    "This is when the gods created 'clerics.' Before this, divine magic was chaotic and free.",
                    "The first temple was a scam, run by a charismatic 'prophet' who just made it all up."
                ]
            },
            402: {
                title: "The Starfall Prophecy", date: "-1,500 BEC",
                description: "Celestial beings, in a rare moment of direct contact, foretell a great war that will end with the stars themselves falling from the sky.",
                rumors: [
                    "The 'celestial beings' were just the Giants, trying to warn us from their new home.",
                    "The Witches of Delphi *caused* the prophecy. They looked too deeply into the future, and the future looked back.",
                    "The prophecy was a threat, not a warning. 'Behave, or we will drop the sky on you.'"
                ]
            },
            403: {
                title: "Fourth Witches' Council", date: "-1,500 BEC",
                description: "The fourth Witches' Council of Delphi is formed, this time to interpret and, if possible, prevent the catastrophic Starfall Prophecy.",
                rumors: [
                    "The fourth council was a failure. They split into two factions: one to stop the prophecy, one to *ensure* it happened.",
                    "This is the council that first made contact with the Shadowfell, looking for answers.",
                    "They're *still* the acting council. They're just all liches now."
                ]
            },
            404: {
                title: "Shattering of the Crystal Spire", date: "-1,200 BEC",
                description: "A magical catastrophe, rumored to be an elven experiment gone wrong, leads to the collapse of the Crystal Spire. This causes a deep distrust among elven governments, ending the 'First Elven State'.",
                rumors: [
                    "It wasn't an 'experiment.' It was an *attack* by the first human wizards, who were jealous of elven power.",
                    "The Spire was a planar tuning fork. When it shattered, it's what let the first demons into the world.",
                    "The Spire is still there, just on another plane. Sometimes, you can see it shimmer in the desert."
                ]
            },

            // Classical Age (Mosaic)
            301: {
                title: "End of the Dragon Bounty", date: "-5,500 BEC",
                description: "The gods officially end their bounty on vile dragons, believing (incorrectly) that all of them have been eradicated. The remaining dragons go into hiding or flee to Astrousia.",
                rumors: [
                    "The gods knew they weren't all dead. They just got *bored* and didn't want to pay the bounty anymore.",
                    "The bounty hunters became a problem themselves, so the gods just fired them all.",
                    "The dragons that fled to Astrousia are the 'God Kings' the Atheneum is fighting. It's the same war, just with a new name."
                ]
            },
            302: {
                title: "The Underlight War", date: "c. -5,000 BEC",
                description: "Dwarves descend into the Underdark to fight rising evil forces (likely drow and illithids), securing their underground kingdoms. This war forces some drow deeper, into the true dark.",
                rumors: [
                    "The dwarves didn't *win*. They just made a *deal* with the Mind Flayers. 'You stay on your side, we stay on ours.'",
                    "The dwarves descended to chase a vein of mythical ore. The 'war' was just what they told the surface-dwellers.",
                    "The drow were *fleeing* something worse. The dwarves just got in the way."
                ]
            },
            303: {
                title: "Invention of Written Magic", date: "c. -4,000 BEC",
                description: "Wizards begin codifying spells into written language, leading to the first spellbooks. This new 'easy' magic causes older traditions, like rune magic, to fade.",
                rumors: [
                    "Written magic is *weaker* than rune magic. It's just faster. It's quantity over quality.",
                    "The first 'spellbook' was just a dragon's diary, which a human found and misunderstood.",
                    "The Atheneum hunts down and destroys rune-magic users. They see it as a threat."
                ]
            },
            304: {
                title: "Founding of the First Kingdoms", date: "c. -4,000 BEC",
                description: "The first true human civilizations emerge from scattered tribes. Weary of chaos, they establish stable governance and build the first walled cities.",
                rumors: [
                    "The 'First Kingdom' was ruled by a vampire. He's still ruling it, just under a different name.",
                    "It was the elves who taught humans how to build cities, and they've regretted it ever view.",
                    "The 'first king' was the first person to cast a 'Geas' spell, and he just *made* everyone obey him."
                ]
            },
            305: {
                title: "Arcane Renaissance", date: "c. -3,000 BEC",
                description: "A surge in arcane research, fueled by 'Written Magic,' leads to the creation of the first magical schools and academies. Magic becomes a true field of study.",
                rumors: [
                    "This 'renaissance' is what woke up the Ancient Evil that tricked Minos.",
                    "The 'first academy' was just a pyramid scheme. You paid a fortune, and they taught you 'Prestidigitation'.",
                    "This is when mortals first started challenging the gods, and the gods did *not* like it."
                ]
            },
            306: {
                title: "Rise of the Atheneum", date: "c. -3,000 BEC",
                description: "The Atheneum forms within the First Elven State, a complex government designed to fend off the 'Becarras barbarians' (early Beccin peoples).",
                rumors: [
                    "The 'barbarians' were just humans who wanted their land back from the elves.",
                    "The 'Atheneum' was just a library. The 'government' part came later, when the librarians got ambitious.",
                    "Beccarack himself was a half-elf, which is why the elves hated him so much."
                ]
            },
            307: {
                title: "Astrousian Campaigns", date: "c. -3,000 BEC",
                description: "Expeditions to reclaim the lost continent of Astrousia from dragon overlords result in mixed success. The surviving dragons rebrand as 'God Kings' to avoid further conflicts.",
                rumors: [
                    "The dragons *let* them win. It's easier to be a 'God King' than a 'dragon overlord.' Less paperwork.",
                    "Astrousia isn't a continent. It's the back of a sleeping, world-sized turtle.",
                    "The expeditions never came back. The 'mixed success' stories are just propaganda."
                ]
            },

            // Ancient Era (Star-Chart)
            201: {
                title: "The Jailing of Minos", date: "c. -6,500 BEC",
                description: "The demigod Minos is tricked by an Ancient Evil and imprisoned. The gods grant the elf Utnapishtim eternal life to guard the Ancient Evil's prison.",
                rumors: [
                    "Utnapishtim isn't 'guarding' the prison. He's the *key* to it. If he dies, the Evil gets out.",
                    "Minos wasn't 'tricked.' He *serves* the Ancient Evil. The 'prison' is his fortress.",
                    "The 'Ancient Evil' is just a dragon the gods couldn't kill."
                ]
            },
            202: {
                title: "Dragons Rule as Gods", date: "c. -6,000 BEC",
                description: "In the absence of true gods, dragons rule over the mortal races as divine beings. This angers the gods, but they cannot intervene directly.",
                rumors: [
                    "The dragons were *better* gods. At least they were *here*.",
                    "The 'gods' were just *other* dragons. The 'War of the Gods' was just a big dragon civil war.",
                    "The hobbits *still* worship a dragon god. They just don't tell anyone."
                ]
            },
            203: {
                title: "Creation of Humanoids", date: "c. -6,000 BEC",
                description: "Humans, dragonborn, and kobolds are created, expanding the mortal races and creating new pawns for the dragons and gods.",
                rumors: [
                    "Kobolds are just... malformed dragonborn. A 'practice run' that the dragons discarded.",
                    "Humans weren't 'created.' They just... *happened*. A cosmic accident. That's why they're so chaotic.",
                    "Dragonborn were made by dragons, for dragons. They are the 'perfect' race."
                ]
            },
            204: {
                title: "The Death of Arcana", date: "Oct 31st, -7,000 BEC",
                description: "The goddess of magic, Arcana, is killed by a powerful dragon named Maekrix. This event sends magic into chaos and bars most dragons from the Prime Material Plane.",
                rumors: [
                    "Arcana isn't dead. She just *shattered*. Her 'shards' are the source of all wild magic surges.",
                    "Maekrix didn't kill Arcana. He *ate* her. He's now the god of magic, in secret.",
                    "October 31st is a holy day for dragon-haters. And a very, very bad day for dragons."
                ]
            },
            205: {
                title: "First Witches' Council", date: "c. -7,000 BEC",
                description: "After Arcana's death, the powerful magic-users Eve and Lilith form the first Witches' Council of Delphi to try and stabilize the world's unraveling magic.",
                rumors: [
                    "Eve and Lilith are the same person. They just argue with themselves a lot.",
                    "The Witches' Council *caused* the 'Death of Arcana.' They wanted to control magic for themselves.",
                    "'Delphi' isn't a place. It's a state of mind. You can only go there in your dreams."
                ]
            },
            206: {
                title: "Winrich's Necromantic Empire", date: "-6,800 to -6,450 BEC",
                description: "The powerful necromancer Winrich starts his empire in Icebeach. He is eventually defeated by 'SOMETHING Rex' and encased in a massive glacier. The goddess Morena becomes its steward.",
                rumors: [
                    "Winrich is still alive in that glacier. And *awake*. Morena is his jailor.",
                    "'SOMETHING Rex' was a T-Rex. A really, *really* big one.",
                    "The 'Frozen Rose' didn't just defeat Morena. They *freed* Winrich. They just don't know it yet."
                ]
            },
            207: {
                title: "Lyarna-Khesyara's Journey", date: "-6,650 to -6,250 BEC",
                description: "Lyarna-Khesyara becomes the first Pharaoh in Astrousia, inspiring dragons to flee there and set themselves up as gods.",
                rumors: [
                    "Lyarna-Khesyara *was* a dragon. In human form. She set up the whole 'God King' thing herself.",
                    "Her empire was built on a giant, floating pyramid. It's still up there, above the clouds.",
                    "She didn't die. She just... flew into the sun."
                ]
            },
            208: {
                title: "Tharnak the Great Dwarf", date: "c. -6,000 BEC",
                description: "Tharnak unifies the dwarf nations to fight a great evil from the Underdark. He is 'reforged' by the god Matrix.",
                rumors: [
                    "He wasn't 'reforged.' He's a *robot*. The god Matrix is an AI from the Giants.",
                    "The 'evil force' was just the first dwarves who got corrupted by the Underdark.",
                    "Tharnak is buried under the capital, and his hammer is waiting for a new king to claim it."
                ]
            },

            // Antediluvian Era (Tablets)
            101: {
                title: "Creation of the Universe", date: "The Dawn",
                description: "In the beginning, there was chaos. Then, a will. The universe was formed from this will, a first world created and then destroyed in a primordial instant. Our world is the echo of that first, failed creation.",
                rumors: [
                    "Fragments of that 'first world' still exist... like tumors on reality.",
                    "The gods didn't create the universe. They just found it, and claimed it.",
                    "The 'destruction' was no accident. The first world was 'wrong'."
                ]
            },
            102: {
                title: "Introduction of Free Will", date: "The First Choice",
                description: "To the mortals of the new world, a gift was given: Free Will. The power to choose, to defy fate, and to build a destiny independent of the gods. This agency is the source of all mortal strength, and all mortal folly.",
                rumors: [
                    "It wasn't a 'gift.' It was a 'curse.' It's what allows the Hells to exist.",
                    "Free Will is a lie. The gods just use it to blame us for their own mistakes.",
                    "Dragons don't have Free Will. They have *Duty*. That's why they're purer than we are."
                ]
            },
            103: {
                title: "Creation of Dragons", date: "The First Beings",
                description: "The gods forged the Dragons as the world's first, perfect creations. Beings of immense power, tied to the fabric of the Prime Material Plane, they were to be the original stewards of the world.",
                rumors: [
                    "The dragons were a mistake. They were *too* perfect, and the gods became jealous.",
                    "Dragons were not the first. There was... something else... before them. Something the dragons were made to *fight*.",
                    "A dragon's heart is a piece of the world's core. When a dragon dies, the world dies a little, too."
                ]
            },
            104: {
                title: "Giants and Magic", date: "The World Awakens",
                description: "The Giants, who emerged from the earth itself, were the first to discover the latent magic of the world. They became masters of earth, stone, and the primordial energies of creation.",
                rumors: [
                    "The giants didn't 'discover' magic. They *stole* it from the dragons.",
                    "The magic giants used was raw and dangerous. It's what poisoned the world and led to the creation of monsters.",
                    "The giants aren't from the earth. They are the descendants of the 'first world's' only survivors."
                ]
            },
            105: {
                title: "Creation of Dwarves", date: "The Counterweight",
                description: "Seeing the giants' unchecked power, the god Evelesco forged the Dwarves from mountain stone and iron. They were created to be a counterweight, a stubborn, unyielding force to impede the giants' total dominance.",
                rumors: [
                    "Evelesco didn't create the dwarves. He just found them, hiding in the mountains, and gave them a purpose.",
                    "The 'god' Evelesco was actually a renegade giant, who created the dwarves out of pity for the 'little folk'.",
                    "Dwarves and giants are kin. Their 'war' was a lie told by the gods to keep them divided."
                ]
            },
            106: {
                title: "The Giants' Departure", date: "The Exodus",
                description: "Fearing a coming cataclysm (or perhaps a war with the gods), the giants used their mastery of magic and crystal to build great ships. They fled the Prime Material Plane, vanishing into the stars. Only the Goliaths and a few scattered clans remained.",
                rumors: [
                    "They didn't flee. They were *banished*.",
                    "The giants are still out there. 'The Stars Fall' was just the first of their ships returning.",
                    "They went to the *moon*. The whole moon is one giant city. Ask any elf."
                ]
            },
            107: {
                title: "The Great Flood", date: "The Great Cleansing",
                description: "A great flood is sent to cleanse the world. An elf named Utnapishtim is instructed to build an ark to save two of every animal. Goliaths and some giants survive in the mountains, while dragons remain unaffected.",
                rumors: [
                    "Utnapishtim is the *same* elf who guards Minos's prison. The gods reward their loyal servants.",
                    "It wasn't a 'flood.' The giants *stole* the oceans when they left, and the gods just... made new ones.",
                    "The 'ark' was a pocket dimension. The animals are *still* in there, and Utnapishtim just pulls out copies."
                ]
            }
        };

        // --- MODAL SCRIPT ---
        document.addEventListener('DOMContentLoaded', () => {
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContainer = document.getElementById('modal-container');
            const modalContent = document.getElementById('modal-content');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            // Modal Content Fields
            const modalTitle = document.getElementById('modal-title');
            const modalDate = document.getElementById('modal-date');
            const modalDescription = document.getElementById('modal-description');
            const modalRumor = document.getElementById('modal-rumor');

            // Find all event triggers (cards and stars)
            const eventTriggers = document.querySelectorAll('.event-trigger');

            // Utility function to get a random rumor
            function getRandomRumor(rumorsArray) {
                if (!rumorsArray || rumorsArray.length === 0) {
                    return "No rumors surround this event. It is a plain and simple fact.";
                }
                const randomIndex = Math.floor(Math.random() * rumorsArray.length);
                return rumorsArray[randomIndex];
            }

            // Function to open the modal
            function openModal(eventId, theme) {
                // 1. Get data
                const data = timelineData[eventId];
                if (!data) {
                    console.error("No data found for eventId:", eventId);
                    return;
                }

                // 2. Set content
                modalTitle.textContent = data.title;
                modalDate.textContent = data.date;
                modalDescription.textContent = data.description;
                modalRumor.textContent = getRandomRumor(data.rumors);

                // 3. Set theme
                // Reset classes first
                modalContent.className = 'modal-content-base'; 
                if (theme === 'scroll') {
                    modalContent.classList.add('modal-theme-scroll');
                } else if (theme === 'tablet') {
                    modalContent.classList.add('modal-theme-tablet');
                } else if (theme === 'marble') {
                    modalContent.classList.add('modal-theme-marble');
                } else if (theme === 'mosaic') {
                    modalContent.classList.add('modal-theme-mosaic');
                }

                // 4. Show modal with animations
                modalBackdrop.classList.remove('hidden');
                modalContainer.classList.remove('hidden');
                setTimeout(() => {
                    modalBackdrop.classList.add('opacity-100');
                    modalContainer.classList.add('opacity-100', 'scale-100');
                    modalContainer.classList.remove('opacity-0', 'scale-95');
                }, 10);
            }

            // Function to close the modal
            function closeModal() {
                // Animate out
                modalBackdrop.classList.remove('opacity-100');
                modalContainer.classList.remove('opacity-100', 'scale-100');
                modalContainer.classList.add('opacity-0', 'scale-95');

                // Hide after animation (300ms)
                setTimeout(() => {
                    modalBackdrop.classList.add('hidden');
                    modalContainer.classList.add('hidden');
                }, 300);
            }

            // --- Event Listeners ---
            
            // Add click listener to all triggers
            eventTriggers.forEach(trigger => {
                trigger.addEventListener('click', () => {
                    const eventId = trigger.getAttribute('data-event-id');
                    const theme = trigger.getAttribute('data-theme');
                    openModal(eventId, theme);
                });
            });

            // Close modal listeners
            modalBackdrop.addEventListener('click', closeModal);
            modalCloseBtn.addEventListener('click', closeModal);
            
            // Close with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !modalContainer.classList.contains('hidden')) {
                    closeModal();
                }
            });
        });
    </script>

</body>
</html>